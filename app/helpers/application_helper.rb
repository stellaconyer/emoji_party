module ApplicationHelper
  def random_emoji(length)
    e = ("ðŸ˜„ðŸ˜ƒðŸ˜€ðŸ˜Šâ˜ºðŸ˜‰ðŸ˜ðŸ˜˜ðŸ˜šðŸ˜—ðŸ˜™ðŸ˜œðŸ˜ðŸ˜›ðŸ˜³ðŸ˜ðŸ˜”ðŸ˜ŒðŸ˜’ðŸ˜žðŸ˜£" +
    "ðŸ˜¢ðŸ˜‚ðŸ˜­ðŸ˜ªðŸ˜¥ðŸ˜°ðŸ˜…ðŸ˜“ðŸ˜©ðŸ˜«ðŸ˜¨ðŸ˜±ðŸ˜ ðŸ˜¡ðŸ˜¤ðŸ˜–ðŸ˜†ðŸ˜‹ðŸ˜·ðŸ˜ŽðŸ˜´" +
    "ðŸ˜µðŸ˜²ðŸ˜ŸðŸ˜¦ðŸ˜§ðŸ˜ˆðŸ‘¿ðŸ˜®ðŸ˜¬ðŸ˜ðŸ˜•ðŸ˜¯ðŸ˜¶ðŸ˜‡ðŸ˜ðŸ˜‘ðŸ‘²ðŸ‘³ðŸ‘®ðŸ‘·ðŸ’‚" +
    "ðŸ‘¶ðŸ‘¦ðŸ‘§ðŸ‘¨ðŸ‘©ðŸ‘´ðŸ‘µðŸ‘±ðŸ‘¼ðŸ‘¸ðŸ˜ºðŸ˜¸ðŸ˜»ðŸ˜½ðŸ˜¼ðŸ™€ðŸ˜¿ðŸ˜¹ðŸ˜¾ðŸ‘¹ðŸ‘º" +
    "ðŸ™ˆðŸ™‰ðŸ™ŠðŸ’€ðŸ‘½ðŸ’©ðŸ”¥âœ¨ðŸŒŸðŸ’«ðŸ’¥ðŸ’¢ðŸ’¦ðŸ’§ðŸ’¤ðŸ’¨ðŸ‘‚ðŸ‘€ðŸ‘ƒðŸ‘…ðŸ‘„" +
    "ðŸ‘ðŸ‘ŽðŸ‘ŒðŸ‘ŠâœŠâœŒðŸ‘‹âœ‹ðŸ––ðŸ‘ðŸ‘†ðŸ‘‡ðŸ‘‰ðŸ‘ˆðŸ™ŒðŸ™â˜ðŸ‘ðŸ’ªðŸš¶ðŸƒðŸ’ƒ" +
    "ðŸ‘«ðŸ‘ªðŸ‘¬ðŸ‘­ðŸ’ðŸ’‘ðŸ‘¯ðŸ™†ðŸ™…ðŸ’ðŸ™‹ðŸ’†ðŸ’‡ðŸ’…ðŸ‘°ðŸ™ŽðŸ™ðŸ™‡ðŸŽ©ðŸ‘‘ðŸ‘’" +
    "ðŸ‘ŸðŸ‘žðŸ‘¡ðŸ‘ ðŸ‘¢ðŸ‘•ðŸ‘”ðŸ‘šðŸ‘—ðŸŽ½ðŸ‘–ðŸ‘˜ðŸ‘™ðŸ’¼ðŸ‘œðŸ‘ðŸ‘›ðŸ‘“ðŸŽ€ðŸŒ‚ðŸ’„" +
    "ðŸ’›ðŸ’™ðŸ’œðŸ’šâ¤ðŸ’”ðŸ’—ðŸ’“ðŸ’•ðŸ’–ðŸ’žðŸ’˜ðŸ’ŒðŸ’‹ðŸ’ðŸ’ŽðŸ‘¤ðŸ‘¥ðŸ’¬ðŸ‘£ðŸ’­" +
    "ðŸ¶ðŸºðŸ±ðŸ­ðŸ¹ðŸ°ðŸ¸ðŸ¯ðŸ¨ðŸ»ðŸ·ðŸ½ðŸ®ðŸ—ðŸµðŸ’ðŸ´ðŸ‘ðŸ˜ðŸ¼ðŸ§" +
    "ðŸ¦ðŸ¤ðŸ¥ðŸ£ðŸ”ðŸðŸ¢ðŸ›ðŸðŸœðŸžðŸŒðŸ™ðŸšðŸ ðŸŸðŸ¬ðŸ³ðŸ‹ðŸ„ðŸ" +
    "ðŸ€ðŸƒðŸ…ðŸ‡ðŸ‰ðŸŽðŸðŸ“ðŸ•ðŸ–ðŸðŸ‚ðŸ²ðŸ¡ðŸŠðŸ«ðŸªðŸ†ðŸˆðŸ©ðŸ¾" +
    "ðŸ’ðŸŒ¸ðŸŒ·ðŸ€ðŸŒ¹ðŸŒ»ðŸŒºðŸðŸƒðŸ‚ðŸŒ¿ðŸŒ¾ðŸ„ðŸŒµðŸŒ´ðŸŒ²ðŸŒ³ðŸŒ°ðŸŒ±ðŸŒ¼ðŸŒ" +
    "ðŸŒžðŸŒðŸŒšðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒœðŸŒ›ðŸŒ™ðŸŒðŸŒŽðŸŒðŸŒ‹ðŸŒŒðŸŒ â­" +
    "â˜€â›…â˜âš¡â˜”â„â›„ðŸŒ€ðŸŒðŸŒˆðŸŒŠ" +
    "ðŸŽðŸ’ðŸŽŽðŸŽ’ðŸŽ“ðŸŽðŸŽ†ðŸŽ‡ðŸŽðŸŽ‘ðŸŽƒðŸ‘»ðŸŽ…ðŸŽ„ðŸŽðŸŽ‹ðŸŽ‰ðŸŽŠðŸŽˆðŸŽŒðŸ”®" +
    "ðŸŽ¥ðŸ“·ðŸ“¹ðŸ“¼ðŸ’¿ðŸ“€ðŸ’½ðŸ’¾ðŸ’»ðŸ“±â˜ŽðŸ“žðŸ“ŸðŸ“ ðŸ“¡ðŸ“ºðŸ“»ðŸ”ŠðŸ”‰ðŸ”ˆðŸ”‡" +
    "ðŸ””ðŸ”•ðŸ“¢ðŸ“£â³âŒ›â°âŒšðŸ”“ðŸ”’ðŸ”ðŸ”ðŸ”‘ðŸ”ŽðŸ’¡ðŸ”¦ðŸ”†ðŸ”…ðŸ”ŒðŸ”‹ðŸ”" +
    "ðŸ›ðŸ›€ðŸš¿ðŸš½ðŸ”§ðŸ”©ðŸ”¨ðŸšªðŸš¬ðŸ’£ðŸ”«ðŸ”ªðŸ’ŠðŸ’‰ðŸ’°ðŸ’´ðŸ’µðŸ’·ðŸ’¶ðŸ’³ðŸ’¸" +
    "ðŸ“²ðŸ“§ðŸ“¥ðŸ“¤âœ‰ðŸ“©ðŸ“¨ðŸ“¯ðŸ“«ðŸ“ªðŸ“¬ðŸ“­ðŸ“®ðŸ“¦ðŸ“ðŸ“„ðŸ“ƒðŸ“‘ðŸ“ŠðŸ“ˆðŸ“‰" +
    "ðŸ“œðŸ“‹ðŸ“…ðŸ“†ðŸ“‡ðŸ“ðŸ“‚âœ‚ðŸ“ŒðŸ“Žâœ’âœðŸ“ðŸ“ðŸ“•ðŸ“—ðŸ“˜ðŸ“™ðŸ““ðŸ“”ðŸ“’" +
    "ðŸ“šðŸ“–ðŸ”–ðŸ“›ðŸ”¬ðŸ”­ðŸ“°ðŸŽ¨ðŸŽ¬ðŸŽ¤ðŸŽ§ðŸŽ¼ðŸŽµðŸŽ¶ðŸŽ¹ðŸŽ»ðŸŽºðŸŽ·ðŸŽ¸ðŸ‘¾ðŸŽ®" +
    "ðŸƒðŸŽ´ðŸ€„ðŸŽ²ðŸŽ¯ðŸˆðŸ€âš½âš¾ðŸŽ¾ðŸŽ±ðŸ‰ðŸŽ³â›³ðŸšµðŸš´ðŸðŸ‡ðŸ†ðŸŽ¿ðŸ‚" +
    "ðŸŠðŸ„ðŸŽ£â˜•ðŸµðŸ¶ðŸ¼ðŸºðŸ»ðŸ¸ðŸ¹ðŸ·ðŸ´ðŸ•ðŸ”ðŸŸðŸ—ðŸ–ðŸðŸ›ðŸ¤" +
    "ðŸ±ðŸ£ðŸ¥ðŸ™ðŸ˜ðŸšðŸœðŸ²ðŸ¢ðŸ¡ðŸ³ðŸžðŸ©ðŸ®ðŸ¦ðŸ¨ðŸ§ðŸŽ‚ðŸ°ðŸªðŸ«" +
    "ðŸ¬ðŸ­ðŸ¯ðŸŽðŸðŸŠðŸ‹ðŸ’ðŸ‡ðŸ‰ðŸ“ðŸ‘ðŸˆðŸŒðŸðŸðŸ ðŸ†ðŸ…ðŸŒ½ðŸ ðŸ¡ðŸ«ðŸ¢ðŸ£ðŸ¥ðŸ¦ðŸªðŸ©ðŸ¨ðŸ’’â›ªðŸ¬ðŸ¤ðŸŒ‡ðŸŒ†ðŸ¯ðŸ°â›ºðŸ­ðŸ—¼" +
    "ðŸ—¾ðŸ—»ðŸŒ„ðŸŒ…ðŸŒƒðŸ—½ðŸŒ‰ðŸŽ ðŸŽ¡â›²ðŸŽ¢ðŸš¢â›µðŸš¤ðŸš£âš“ðŸš€âœˆðŸ’ºðŸšðŸš‚" +
    "ðŸšŠðŸš‰ðŸšžðŸš†ðŸš„ðŸš…ðŸšˆðŸš‡ðŸšðŸš‹ðŸšƒðŸšŽðŸšŒðŸšðŸš™ðŸš˜ðŸš—ðŸš•ðŸš–ðŸš›ðŸšš" +
    "ðŸš¨ðŸš“ðŸš”ðŸš’ðŸš‘ðŸšðŸš²ðŸš¡ðŸšŸðŸš ðŸšœðŸ’ˆðŸšðŸŽ«ðŸš¦ðŸš¥âš ðŸš§ðŸ”°â›½ðŸ®" +
    "ðŸŽ°â™¨ðŸ—¿ðŸŽªðŸŽ­ðŸ“ðŸš©").split(//)
    s = ""
    (0..length).each do |i|
      s += "#{e.sample}"
    end
    s
  end

  def generate_ogimage_content(post)
    doc = Nokogiri::HTML(post.body)
    img_srcs = doc.css('img').map{ |i| i['src'] }
    img_srcs.count > 0 ? add_host_if_needed(img_srcs[0]) : asset_url(post.author.photo)
  end

  private

  def add_host_if_needed(image_src)
    if image_src[0] == "/"
        "http://www.emojiparty.net#{img_src}"
    else
        image_src
    end
  end
end

